{% extends "vendor/base.html" %}

{% block content %}
<div class="container-fluid">
        <nav aria-label="breadcrumb">
            <!-- <ol class="breadcrumb"> -->
            <h1>Purchases</h1>
            <!-- </ol> -->
        </nav>
        <table class="table", border = "1">
            <tr>
                <th>Product</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
                <th>Refund</th>

            </tr>
            {% for items in object_list %}
            <tr>
                <td>{{ items.product.name }}</td>
                <td>{{ items.order_item.quantity }}</td>
                <td>{{ items.order_item.price.cost }}</td>
                <td>{{ items.start_date }}</td>
                <td>{{ items.end_date }}</td>
                <td>{{ items.get_status_display }}</td>
                {% if items.status == 0 or items.status == 10 %}
                    <td><form class="p-5 form" method="post" action="{% url 'vendor-request-refund' items.id %}">{% csrf_token %}
                            <input class="btn btn-danger" type="submit" value="Request Refund"></form></td>
                
                {% elif items.status == 30 %}
                    <td><form class="p-5 form" method="post" action="#">{% csrf_token %}
                            <input class="btn btn-danger" type="submit" value="Refund Requested" disabled></form></td>

                {% elif items.status == 40 %}
                <td><form class="p-5 form" method="post" action="#">{% csrf_token %}
                        <input class="btn btn-danger" type="submit" value="Refund Issued" disabled></form></td>

                {% else %}
                <td><form class="p-5 form" method="post" action="{% url 'vendor-request-refund' items.id %}">{% csrf_token %}
                        <input class="btn btn-danger" type="submit" value="Request Refund" disabled ></form></td>

                {% endif %}
                        
            </tr>
            </tr>
            {% endfor %}
        </table>
       
    </div>
 {% endblock %}   
